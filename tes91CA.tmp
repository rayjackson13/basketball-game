[gd_scene load_steps=36 format=3 uid="uid://db2qqdgo1ysok"]

[ext_resource type="PackedScene" uid="uid://xm0k6uvebcvr" path="res://player.tscn" id="1_8deu4"]
[ext_resource type="Script" path="res://scripts/SettingsController.gd" id="1_k65ie"]
[ext_resource type="Script" path="res://scripts/PlayerMovement.gd" id="2_4agsy"]
[ext_resource type="Texture2D" uid="uid://24bjx04pdmqc" path="res://textures/grey_cartago_02_4k/grey_cartago_02_diff_4k.png" id="3_aa6ef"]
[ext_resource type="Script" path="res://scripts/PickupHandler.gd" id="4_6qwvk"]
[ext_resource type="Texture2D" uid="uid://bf4l3moiguqk1" path="res://textures/grey_cartago_02_4k/grey_cartago_02_nor_gl_4k.png" id="4_y0asp"]
[ext_resource type="Texture2D" uid="uid://bxysggl41jkq3" path="res://textures/grey_cartago_02_4k/grey_cartago_02_rough_4k.png" id="5_q4coj"]
[ext_resource type="Script" path="res://scripts/reticle.gd" id="5_vkm15"]
[ext_resource type="PackedScene" uid="uid://o8ns6ay2l5yb" path="res://prefabs/ammo_box.tscn" id="8_3ahy8"]
[ext_resource type="Shader" path="res://shaders/outline2.gdshader" id="9_5nfvb"]
[ext_resource type="PackedScene" uid="uid://b46mqhinvng4d" path="res://prefabs/pistol.tscn" id="9_od801"]
[ext_resource type="Shader" path="res://shaders/test.gdshader" id="10_4ga30"]
[ext_resource type="Material" uid="uid://w65pgauenjfy" path="res://materials/outline.tres" id="12_06151"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_ap6mt"]
sky_top_color = Color(0.218225, 0.174048, 0.305272, 1)
sky_horizon_color = Color(0.567828, 0.547883, 0.576873, 1)
sky_energy_multiplier = 7.75
ground_bottom_color = Color(0.0530877, 0.0174834, 0.00221853, 1)
ground_horizon_color = Color(0.567828, 0.547883, 0.576873, 1)

[sub_resource type="Sky" id="Sky_vslc1"]
sky_material = SubResource("ProceduralSkyMaterial_ap6mt")

[sub_resource type="Environment" id="Environment_p74xu"]
background_mode = 2
sky = SubResource("Sky_vslc1")
tonemap_mode = 2
ssao_enabled = true
sdfgi_enabled = true
glow_enabled = true
fog_light_color = Color(0.529142, 0.56407, 0.618957, 1)
fog_light_energy = 4.95
fog_sun_scatter = 0.9
fog_density = 0.6924
fog_aerial_perspective = 0.82
volumetric_fog_albedo = Color(0.0885599, 0.0885599, 0.0885599, 1)

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_fqjwx"]
rough = true
bounce = 0.03

[sub_resource type="BoxShape3D" id="BoxShape3D_uxlp6"]
size = Vector3(1.9458, 0.808136, 0.789795)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_avd53"]
albedo_color = Color(0.223103, 0.223103, 0.223103, 1)
metallic = 0.91
metallic_specular = 0.57
roughness = 0.43

[sub_resource type="BoxMesh" id="BoxMesh_kloxb"]
material = SubResource("StandardMaterial3D_avd53")
size = Vector3(1.945, 0.8, 0.795)

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_r8ue5"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lwu2n"]
albedo_color = Color(0.439049, 0.439049, 0.439049, 1)
albedo_texture = ExtResource("3_aa6ef")
metallic = 0.2
metallic_specular = 0.28
roughness = 0.39
roughness_texture = ExtResource("5_q4coj")
normal_enabled = true
normal_texture = ExtResource("4_y0asp")
uv1_scale = Vector3(10, 10, 10)

[sub_resource type="PlaneMesh" id="PlaneMesh_1bqn6"]
material = SubResource("StandardMaterial3D_lwu2n")
size = Vector2(20, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_lfeo6"]
size = Vector3(20.0048, 0.505981, 19.9907)

[sub_resource type="BoxShape3D" id="BoxShape3D_qyrgq"]
size = Vector3(0.110146, 0.110009, 0.109375)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_v1o7k"]
render_priority = 0
shader = ExtResource("9_5nfvb")
shader_parameter/outline_enabled = false
shader_parameter/border_width = 0.1
shader_parameter/color = Color(1, 1, 1, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_nqmxa"]
next_pass = SubResource("ShaderMaterial_v1o7k")
albedo_color = Color(0.368627, 1, 1, 1)
emission = Color(0.368627, 1, 1, 1)
emission_energy_multiplier = 5.0
rim_enabled = true
rim_tint = 1.0

[sub_resource type="BoxMesh" id="BoxMesh_jcp4f"]
material = SubResource("StandardMaterial3D_nqmxa")
size = Vector3(0.1, 0.1, 0.1)

[sub_resource type="SphereMesh" id="SphereMesh_ym4s3"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_srow6"]
render_priority = 0
shader = ExtResource("10_4ga30")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_mhsmb"]
next_pass = ExtResource("12_06151")
albedo_color = Color(0.519779, 0.407037, 0.93786, 1)
metallic = 1.0
metallic_specular = 0.12
roughness = 0.41

[sub_resource type="CylinderMesh" id="CylinderMesh_xowbi"]
material = SubResource("StandardMaterial3D_mhsmb")
top_radius = 0.1
bottom_radius = 0.1
height = 0.2

[sub_resource type="CylinderShape3D" id="CylinderShape3D_kw7rw"]
height = 0.197777
radius = 0.100708

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_shys5"]
next_pass = ExtResource("12_06151")

[sub_resource type="CylinderMesh" id="CylinderMesh_iv7mw"]
material = SubResource("StandardMaterial3D_shys5")
top_radius = 0.1
bottom_radius = 0.1
height = 0.2

[node name="World" type="Node3D"]

[node name="SettingsController" type="Node" parent="."]
script = ExtResource("1_k65ie")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_p74xu")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.300706, -0.938644, 0.168889, 0, 0.177085, 0.984196, -0.953717, 0.295953, -0.0532504, 0, 0, 0)
light_color = Color(1, 1, 0.956863, 1)
light_energy = 1.3
shadow_enabled = true

[node name="Player" parent="." instance=ExtResource("1_8deu4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, -0.737773)
linear_damp = 3.0

[node name="PickupController" type="Node" parent="Player" node_paths=PackedStringArray("player")]
script = ExtResource("4_6qwvk")
player = NodePath("..")

[node name="MovementController" type="Node" parent="Player" node_paths=PackedStringArray("player")]
script = ExtResource("2_4agsy")
player = NodePath("..")

[node name="Props" type="Node3D" parent="."]

[node name="Table" type="RigidBody3D" parent="Props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.406056, -3.60583)
mass = 15.0
physics_material_override = SubResource("PhysicsMaterial_fqjwx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Props/Table"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00170903, 0.000350952, -0.00109863)
shape = SubResource("BoxShape3D_uxlp6")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Props/Table"]
mesh = SubResource("BoxMesh_kloxb")

[node name="Floor" type="StaticBody3D" parent="Props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00589323, -0.00294935, 0.00150728)
physics_material_override = SubResource("PhysicsMaterial_r8ue5")

[node name="Mesh" type="MeshInstance3D" parent="Props/Floor"]
mesh = SubResource("PlaneMesh_1bqn6")
skeleton = NodePath("../../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Props/Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0015564, -0.247009, 0.0217285)
shape = SubResource("BoxShape3D_lfeo6")

[node name="AmmoBox" parent="Props" instance=ExtResource("8_3ahy8")]

[node name="AmmoBox2" parent="Props" instance=ExtResource("8_3ahy8")]
transform = Transform3D(0.990367, 0, 0.138464, 0, 1, 0, -0.138464, 0, 0.990367, 0.527692, 0.8482, -3.30282)

[node name="Pistol" parent="Props" instance=ExtResource("9_od801")]

[node name="Pistol2" parent="Props" instance=ExtResource("9_od801")]
transform = Transform3D(-0.597625, -0.801776, 3.50467e-08, 0, -4.37114e-08, -1, 0.801776, -0.597625, 2.6123e-08, -0.491019, 0.838858, -3.02375)

[node name="Box" type="RigidBody3D" parent="Props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.454961, 0.862268, -3.48047)
metadata/interactable = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Props/Box"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000209808, 0.000158787, -0.000244141)
shape = SubResource("BoxShape3D_qyrgq")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Props/Box"]
mesh = SubResource("BoxMesh_jcp4f")

[node name="Box2" type="RigidBody3D" parent="Props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.346388, 0.862268, -3.48047)
metadata/interactable = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Props/Box2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000209808, 0.000158787, -0.000244141)
shape = SubResource("BoxShape3D_qyrgq")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Props/Box2"]
mesh = SubResource("BoxMesh_jcp4f")

[node name="Squiggly" type="MeshInstance3D" parent="Props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.08361, 0.524818, -3.4058)
mesh = SubResource("SphereMesh_ym4s3")
surface_material_override/0 = SubResource("ShaderMaterial_srow6")

[node name="Cylinder" type="RigidBody3D" parent="Props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.925455, -3.65011)
metadata/interactable = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="Props/Cylinder"]
mesh = SubResource("CylinderMesh_xowbi")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Props/Cylinder"]
shape = SubResource("CylinderShape3D_kw7rw")

[node name="Cylinder2" type="RigidBody3D" parent="Props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.669691, 0.925455, -3.65011)
metadata/interactable = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="Props/Cylinder2"]
mesh = SubResource("CylinderMesh_iv7mw")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Props/Cylinder2"]
shape = SubResource("CylinderShape3D_kw7rw")

[node name="ControlUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="Reticle" type="CenterContainer" parent="ControlUI"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("5_vkm15")
